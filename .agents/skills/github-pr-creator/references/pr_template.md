# PR本文テンプレートとチェックリスト

## タイトル作成ルール

- 命令形で始める。
- 可能な限り72文字以内で具体的にする。
- 実装詳細より、利用者・運用者への影響を優先して表現する。
- 1つのPRでは主題を1つに絞る。

例:

- `予算一覧取得APIを追加する`
- `カテゴリ削除時の関連予算バリデーションを修正する`
- `定期支出の日付計算ロジックを整理する`

## 本文テンプレート（GitHub Markdown）

```markdown
## 概要
- [何を変更したかを高レベルで記載]
- [なぜこの変更が必要だったか]

## 変更内容
- [挙動変更またはAPI変更 1]
- [挙動変更またはAPI変更 2]
- [データモデル・マイグレーション・インフラ変更（あれば）]

## リスクと対応策
- リスク: [想定される失敗モード]
  - 対応策: [予防策、ロールバック、監視]

## テスト
- [x] Unit/Integration/E2E: [実行コマンドと結果]
- [ ] 未実施: [理由]

## レビュアーチェック
- [ ] 変更範囲と意図が明確
- [ ] APIまたはスキーマ変更の妥当性を確認済み
- [ ] リスクとロールバック計画が十分
- [ ] 変更内容に対してテストが妥当
```

## 品質ゲート

最終化前に次を確認する:

- PR本文の記述がコミットまたは差分に追跡できる。
- テスト状況が明示的かつ事実ベースである。
- 重要変更ではリスク記載がある。
- レビュアーチェック項目が具体的である。

## CLI実行例（git + gh）

```bash
# 1) 変更コンテキスト収集
./scripts/collect_pr_context.sh --base main

# 2) PR本文をファイル化（例）
cat > /tmp/pr_body.md <<'EOF'
## 概要
- 変更概要
- 変更理由

## 変更内容
- 詳細1
- 詳細2

## リスクと対応策
- リスク: なし
  - 対応策: なし

## テスト
- [x] npm run test: 実行成功
- [ ] 未実施: なし

## レビュアーチェック
- [ ] 変更範囲と意図が明確
- [ ] APIまたはスキーマ変更の妥当性を確認済み
- [ ] リスクとロールバック計画が十分
- [ ] 変更内容に対してテストが妥当
EOF

# 3) PR作成または更新
./scripts/upsert_github_pr.sh \
  --base main \
  --title "予算一覧取得APIを追加する" \
  --body-file /tmp/pr_body.md
```
